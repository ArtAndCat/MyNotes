#网络 #协议

FTP是互联网上的一项主要服务，各类文件存放于FTP服务器，可以通过FTP客户程序连接FTP服务器，然后利用FTP协议进行文件的“下载“或“上传"。

FTP客户端与服务器之间建立两条TCP连接，一条用于传送控制信息，一条用于传送文件内容。

一般情况是，在服务器一侧运行后台进程S，等待出现在FTP专用端口（21)上的连接请求。

当某个客户端向这个专用端口请求建立连接时，进程S便激活一个新的FTP控制进程N，处理进来的连接请求。

然后S进程返回，等待其他客户端访问。

进程N通过控制连接与客户端进行通信，要求客户在进行文件传送之前输入登录标识符和口令字。

如果登录成功，用户可以通过控制连接列出远程目录，设置传送方式，指明要传送的文件名。

当用户获准按照所要求的方式传送文件之后，进程N激活另一个辅助进程D来处理数据传送。

D进程主动开通第二条数据连接（端口号为20），并在文件传送完成后立即关闭此连接，

D进程也自动结束。如果用户还要传送另一个文件，再通过控制连接与N进程会话，请求另一次传送。