#网络 
##  **ISO/OSI网络参考模型**

 **建立分层结构的原因和意义：**

建立计算机网络的根本目的是实现数据通信和资源共享，而通信则是实现所有网络功能的基础和关键。对于网络的广泛实施，国际标准化组织ISO（International Standard Organization），经过多年研究，在1983年提出了开放系统互联参考模型OSI/RM（Reference Model of Open System Interconnection），这是一个定义连接异种计算机的标准主体结构，给网络设计者提供了一个参考规范。

OSI参考模型的层次

OSI参考模型共有七层，由低到高分别是：物理层、数据链路层、网络层、传输层、会话层、表示层和应用层。

### **1．OSI参考模型的特性**

（1）是一种将异构系统互联的分层结构；

（2）提供了控制互联系统交互规则的标准骨架；

（3）定义了一种抽象结构，而并非具体实现的描述；

（4）不同系统上的相同层的实体称为同等层实体；

（5）同等层实体之间的通信由该层的协议管理；

（6）相邻层间的接口定义了原语操作和低层向上层提供的服务；

（7）所提供的公共服务是面向连接的或无连接的数据服务；

（8）直接的数据传送仅在最低层实现；

（9）每层完成所定义的功能，修改本层的功能并不影响其它层。

### **2．有关OSI参考模型的技术术语**

在OSI参考模型中，每一层的真正功能是为其上一层提供服务。在对这些功能或服务过程以及协议的描述中，经常使用如下一些技术术语：

（1）数据单元

服务数据单元SDU（Service Data Unit）

协议数据单元PDU（Protocol Data Unit）

接口数据单元IDU（Interface Data Unit）

服务访问点SAP（Service Access Point）

服务原语（Primitive）

（2）面向连接和无连接的服务

下层能够向上层提供的服务有两种基本形式：面向连接和无连接的服务。

面向连接的服务是在数据传输之前先建立连接，主要过程是：建立连接、进行数据传送，拆除链路。面向连接的服务，又称为虚电路服务。

无连接服务没有建立和拆除链路的过程，一般也不采用可靠方式传送。不可靠（无确认）的无连接服务又称为[数据报服务](https://www.zhihu.com/search?q=数据报服务&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A3368048317})。

### **3.2.1** **物理层**

物理层是OSI模型的最低层，其任务是实现物理上互连系统间的信息传输。

 1.物理层必须具备以下功能

 （1）物理连接的建立、维持与释放

  （2）物理层服务数据单元传输

 （3）物理层管理。

 2.媒体和互联设备

物理层的媒体包括架空明线、平衡电缆、光纤、无线信道等；

通信用的互联设备如各种插头、插座等；局域网中的各种粗、细同轴电缆，T型接/插头，接收器，发送器，中继器等都属物理层的媒体和连接器。

### **3.2.2** **数据链路层**

数据链路可以粗略地理解为数据信道。数据链路层的任务是以物理层为基础，为网络层提供透明的、正确的和有效的传输线路，通过数据链路协议，实施对二进制数据正确、可靠的传输。

数据链路的建立、拆除、对数据的检错、纠错是数据链路层的基本任务。
0 a 127   b 191  c 223 d 255
#### **1.链路层的主要功能**

（1）链路管理

（2）帧的装配与分解

（3）帧的同步

（4）流量控制与顺序控制

（5）差错控制

（6）使接收端能区分数据和控制信息

（7）透明传输

（8）寻址

#### **2.数据链路层的主要协议**

（1）ISO1745-1975   “数据通信系统的基本型控制规程”。

（2）ISO3309-1984   称为“HDLC 帧结构”

（3）ISO7776             称为“DTE数据链路层规程”。

#### **3.链路层产品**

独立的链路产品中最常见的是网卡，网桥也是链路产品。

数据链路层将本质上不可靠的传输媒介变成可靠的传输通路提供给网络层。在IEEE802．3情况下，数据链路层分成两个子层：一个是逻辑链路控制，另一个是媒体访问控制。

### **3.2.3** **网络层**

网络层是通信子网与资源子网之间的接口，也是高、低层协议之间的接口层。网络层的主要功能是路由选择、流量控制、传输确认、中断、差错及故障的恢复等。当本地端与目的端不处于同一网络中，网络层将处理这些差异。

#### **1.网络层的主要功能**

（1）建立和拆除网络连接

（2）分段和组块

（3）有序传输和流量控制

（4）网络连接多路复用

（5）路由选择和中继

（6）差错的检测和恢复

（7）服务选择

#### **2.网络层提供的服务**

OSI/RM中规定，网络层中提供无连接和面向连接两种类型的服务，也称为数据报服务和虚电路服务。

#### 3.网络层传输协议

IP
IP所提供的服务通常被认为是无连接的和不可靠的，它将差错控制和流量控制之类的服务授权给了其他的各层协议，这正是TCP/IP 能够高效率工作的一个重要保证。网络层的功能主要由IP来提供，除了提供端到端的分组分发功能外，IP还提供很多扩充功能。例如，为了克服数据链路层对帧大小的限制，网络层提供了数据分块和重组功能，这使得很大的IP数据包能以较小的分组在网络上传输。

ARP
ARP(Address Resolution Protocol，地址解析协议)用于动态地完成IP地址向物理地址的转换。物理地址通常是指计算机的网卡地址，也称为MAC(Medai Access Control，媒体访问控制)地址，每块网卡都有唯一的地址。

RARP
RARP(Reverse Address Resolution Protocol，反向地址解析协议)用于动态完成物理地址向IP地址的转换。

ICMP
ICMP(Internet Control Message Protocol，网际控制报文协议)是一个专门用于发送差错报文的协议，由于IP协议是一种尽力传送的通信协议，即传送的数据可能丢失、重复、延迟或乱序传递，所以需要一种尽量避免差错并能在发生差错时报告的机制，这就是ICMP的功能。

传输层是资源子网与通信子网的接口和桥梁。传输层下面三层（属于通信子网）面向数据通信，上面三层（属于资源子网）面向数据处理。因此，传输层位于高层和低层中间，起承上启下的作用。它屏蔽了通信子网中的细节，实现通信子网中端到端的透明传输，完成资源子网中两节点间的逻辑通信。它是负责数据传输的最高一层，也是整个七层协议中最重要和最复杂的一层。

#### 1.传输层的特性

（1）连接与传输

（2）传输层服务

#### 2.传输层的主要功能

3.传输层协议

### **3.2.5** **会话层**

会话层、表示层和应用层一起构成OSI/RM的高层，会话层位于OSI模型面向信息处理的高三层中的最下层，它利用传输层提供的端到端数据传输服务，具体实施服务请求者与服务提供者之间的通信，属于进程间通信的范畴。

会话层还对会话活动提供组织和同步所必须的手段，对数据传输提供控制和管理。

#### 1.会话层的主要功能

（1）提供远程会话地址

（2）会话建立后的管理

（3）提供把报文分组重新组成报文的功能

#### 2.会话层提供的服务

（1）会话连接的建立和拆除

（2）与会话管理有关的服务

（3）隔离

（4）出错和恢复控制

### **3.2.6** **表示层**

表示层为应用层服务，该服务层处理的是通信双方之间的数据表示问题。为使通信的双方能互相理解所传送信息的含义，表示层就需要把发送方具有的内部格式编码为适于传输的比特流，接收方再将其译码为所需要的表示形式。

数据传送包括语义和语法两个方面的问题。OSI模型中，有关语义的处理由应用层负责，表示层仅完成语法的处理。

#### 1.表示层的主要功能

（1）语法转换

（2）传送语法的选择

（3）常规功能

#### 2.表示层提供的服务
（1）数据转换和格式转换
（2）语法选择
（3）数据加密与解密
（4）文本压缩
### **3.2.7** **应用层**
OSI的7层协议从功能划分来看，下面6层主要解决支持网络服务功能所需要的通信和表示问题，应用层则提供完成特定网络功能服务所需要的各种应用协议。
应用层是OSI的最高层，直接面向用户，是计算机网络与最终用户的接口。负责两个应用进程（应用程序或操作员）之间的通信，为网络用户之间的通信提供专用程序。

| 分层    | 功能                         |
| ----- | -------------------------- |
| 应用层   | 网络服务与最终用户的一个接口（可理解为人机交互界面） |
| 表示层   | 数据的表示，安全，压缩                |
| 会话层   | 建立，管理，终止会话                 |
| 传输层   | 定义传输数据的协议端口号，以及流控和差错校验     |
| 网络层   | 进行逻辑地址寻址，实现不同网络之间的路径选择     |
| 数据链路层 | 建立逻辑连接，进行硬件地址寻址，差错校验等功能    |
| 物理层   | 建立，维护，断开物理连接               |


>  举例
> 场景：
> 甲某通过计算机的电脑端微信给乙某发了两个字“你好”
>
> 加入七层协议，分析过程：
> 应用层
> 最直观的理解就是人机交互界面，或者说是系统程序窗口。贾某将“你好”两个字输入电脑微信软件。
>
> 表示层。
> 计算机如何处理“你好”两个字？ 答案就是“翻译”！ 人类有人类的语言，计算机也有自己的语言。计算机是不懂汉语的，他只知道二进制的 0 和 1 ，那么贾某在计算机的微信上打了“你好”这两个字，计算机接收到后开始通过二进制转换成自己的语言。这一步就是翻译，当然，表示层还有其他的功能，例如安全加密，压缩等。
>
> 会话层。
> 计算机知道你要发送的东西之后，就需要准备发送了。那么，第一步就是要找到对方（乙某），并和对方建立会话关系。直接理解：会话属于软件层面，允许不同机器上的用户之间建立会话关系。
>
> 传输层。
> 传输层可理解为是同一个软件中的两个端口进行数据传输。我用微信发送的消息，你也需要用微信来接收。那么就是电脑端微信用户之间的传输。
>
> 网络层。
> 传输层已经准备就绪了，可是我们知道微信用户千千万，贾某和乙某中间还存在很多的其他用户，我们怎么实现贾某的文字就能准确的发送到乙某的微信上呢？ 这就是需要网络层的 IP 地址了。只要知道了乙某的 IP 地址，就可以选择最佳路径进行准确的数据传输了。
>
> 数据链路层。
> 网络层接收到数据后需要继续往下传输，需要使用工具，就是数据链路层的网卡，继续进行传输。
> 
> 物理层：
> 数据到达物理层后，变成信号传输。
> 数据到达目标主机后，开始进行一个逆向的过程。
> 即数据到达对方主机后，从物理层传输到数据链路层–网络层–传输层–会话层–表示层–应用层。
> 此时，数据到达乙某的电脑，乙某就可以看到甲某发送的“你好”两个字了。





## IP地址

在 TCP/IP ⽹络通信时，为了保证能正常通信，每个设备都需要配置正确的 IP 地址，否则⽆法实现正常的通信。 IP 地址（IPv4 地址）由 32 位正整数来表示，IP 地址在计算机是以⼆进制的⽅式处理的。 ⽽⼈类为了⽅便记忆采⽤了点分⼗进制的标记⽅式，也就是将 32 位 IP 地址以每 8 位为组，共分为 4 组，每组以 「 . 」隔开，再将每组转换成⼗进制.

![image-20240326101133423](C:\Users\贾泽豪\AppData\Roaming\Typora\typora-user-images\image-20240326101133423.png)

![image-20240326101155521](C:\Users\贾泽豪\AppData\Roaming\Typora\typora-user-images\image-20240326101155521.png)

那么，IP 地址最⼤值也就是 43 亿台计算机连接到⽹络。

实际上，IP 地址并不是根据主机台数来配置的，⽽是以⽹卡。像服务器、路由器等设备都是有 2 个以上的⽹卡，也 就是它们会有 2 个以上的 IP 地址。

![image-20240326101105399](C:\Users\贾泽豪\AppData\Roaming\Typora\typora-user-images\image-20240326101105399.png)



### IP 地址的分类

互联⽹诞⽣之初，IP 地址显得很充裕，于是计算机科学家们设计了分类地址。 IP 地址分类成了 5 种类型，分别是 A 类、B 类、C 类、D 类、E 类。

![image-20240326101337983](C:\Users\贾泽豪\AppData\Roaming\Typora\typora-user-images\image-20240326101337983.png)

上图中⻩⾊部分为分类号，⽤以区分 IP 地址类别





####  什么是 A、B、C 类地址？











其中对于 A、B、C 类主要分为两个部分，分别是⽹络号和主机号。这很好理解，好⽐⼩林是 A ⼩区 1 栋 101 号， 你是 B ⼩区 1 栋 101 号





![image-20240326101558406](C:\Users\贾泽豪\AppData\Roaming\Typora\typora-user-images\image-20240326101558406.png)



最⼤主机个数，就是要看主机号的位数，如 C 类地址的主机号占 8 位，那么 C 类地址的最⼤主机个数：

<img src="C:\Users\贾泽豪\AppData\Roaming\Typora\typora-user-images\image-20240326101749233.png" alt="image-20240326101749233" style="zoom:200%;" />







在 IP 地址中，有两个 IP 是特殊的，分别是主机号全为 1 和 全为 0 地址。





#### 什么是 D、E 类地址？

⽽ D 类和 E 类地址是没有主机号的，所以不可⽤于主机 IP，D 类常被⽤于多播，E 类是预留的分类，暂时未使 ⽤。

![image-20240326101925829](C:\Users\贾泽豪\AppData\Roaming\Typora\typora-user-images\image-20240326101925829.png)





多播地址⽤于什么?





多播⽤于将包发送给特定组内的所有主机。 

还是举班级的栗⼦，⽼师说：“最后⼀排的同学，上来做这道数学题。”，⽼师指定的是最后⼀排的同学，也就是多播的含义了。 由于⼴播⽆法穿透路由，若想给其他⽹段发送同样的包，就可以使⽤可以穿透路由的多播。



























